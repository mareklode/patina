<!--?php
    $h1 = 'test';
    $headerSimple = true;
    include '_header.php' 
?-->

<style>
    html,
    body {
        margin: 0
    }

    .pattern__thumbnail {
        float: left;
        margin: 0;
        line-height: 64px;
        color: purple;
        text-align: center;
        background-size: contain;
    }

    .output {
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        padding: 5px;
        background-color: white;
        border: 1px solid black;
    }
</style>

<div class="output"></div>
<div class="pattern">
    <div class="js-module pattern__thumbnail pattern__thumbnail--512" <div
        class="js-module pattern__thumbnail pattern__thumbnail--512"
        style="background-color: #7d9cb1; height: 100vh; width: 100%;" data-module-name="patina" data-module-data='{
                    "patina": {
                        "type"  : "createPattern",
                        "patternName": "rays",
                        "count": 180,
                        "offsetX"   : 0,
                        "offsetY"   : 0,
                        "sharpen"   : 4,
                        "rotation"  : 1
                    }
                }'></div>
</div>

<script>
    const target = document.querySelector('.output');
    const pixelPaintingInstructions = `{
                "width": 256,
                "patina": {
                    "type"  : "colors",
                    "colorRed"   : 73,
                    "colorGreen" : 94,
                    "colorBlue"  : 18,
                    "colorAlpha" : {
                        "type"  :   "layers",
                        "layerTop"    : {
                            "type"  :   "layers",
                            "layerTop"    : {
                                "type"  :   "layers",
                                "layerTop"      : {
                                    "type"          : "createPattern",
                                    "patternName"   : "noise_plasma"
                                },
                                "layerBottom"   : {
                                    "type"          : "createPattern",
                                    "patternConfig" : { 
                                        "name"   : "wave",
                                        "direction"     : "horizontal",
                                        "frequency"     : 60
                                    }
                                }
                            },
                            "layerBottom" : { 
                                "type"          : "createPattern",
                                "patternName"   : "slope",
                                "filter"        : [{ "name": "brightness", "brightness": -2 }]
                            }
                        },
                        "layerBottom" : { 
                            "type"  :   "layers",
                            "layerTop"    : {
                                "type"          : "createPattern",
                                "patternName"   : "noise_white"
                            },
                            "layerBottom"   : {
                                "type"          : "createPattern",
                                "patternConfig" : { 
                                    "name"   : "wave",
                                    "direction"     : "vertical",
                                    "frequency"     : 67
                                }
                            }
                        },
                        "filter"        : [
                            { "name": "invert" },
                            { "name": "blur", "radius": 1 },
                            { "name": "contrast", "m": 3, "x": 0.625 }
                        ]
                    }
                }
            }`;

    import('./scripts/modules/mel_patina.js')
        .then((patina) => {
            new patina.default(target, pixelPaintingInstructions);
        });
</script>
</main>

<script type="module" src="scripts/main.js"></script>

</body>

</html>